import './globals.scss'
import Header from '@/components/Header/Header'
import Providers from '@/store/Providers'
import Footer from '@/components/Footer/Footer'
import { getCats } from '@/options/api'
import ScrollToTop from '@/components/ScrollToTop'
import Toast from '@/components/UI/Toast'
import SCRegistry from '@/options/registry'

export const metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

export default async function RootLayout({ children }: { children: React.ReactNode }) {
  const cats = await getCats()
  const isError = !cats.results

  return (
    <SCRegistry>
      <html lang="en">
        <body>
          <Providers>
            <div className="app">
              <Header cats={cats.results!} isError={isError} />
              <div className="container main_container">
                {children}
              </div>
              <Footer cats={cats.results!} isError={isError} />
            </div>
            <ScrollToTop />
            <Toast />
          </Providers>
        </body>
      </html>
    </SCRegistry>
  )
}
